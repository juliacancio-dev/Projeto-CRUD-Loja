CREATE DATABASE BDLOJA;

USE BDLOJA;

/*TABELA CATEGORIA*/

CREATE TABLE TBCATEGORIA (
    IDCATE INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    NOMECATE VARCHAR(25)
);

/*DADOS DA TABELA CATEGORIA*/
INSERT INTO TBCATEGORIA (NOMECATE) VALUES
    ("INFANTIL"),
    ("INFORMÁTICA"),
    ("EDUCAÇÃO");

/*TABELA PRODUTOS*/

CREATE TABLE TBPRODUTO (
    IDPROD INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    NOMEPROD VARCHAR(30),
    PRECOPROD DECIMAL(7,2),
    CODCATE INT NOT NULL,
    FOREIGN KEY (CODCATE) REFERENCES TBCATEGORIA(IDCATE)
) ENGINE=INNODB;

/*DADOS DA TABELA PRODUTO*/
INSERT INTO TBPRODUTO (NOMEPROD, PRECOPROD, CODCATE) VALUES
    ("Bola", 120.00, 1),
    ("Patinete", 1500.00, 1),
    ("Carrinho", 15.00, 1),
    ("Skate", 300.00, 1),
    ("Notebook", 3000.00, 2),
    ("Monitor LG", 1500.00, 2),
    ("Teclado luzes", 160.00, 2),
    ("O Diário de Anne Frank", 45.00, 3),
    ("O dia do Curinga", 65.00, 3),
    ("O mundo de Sofia", 48.00, 3),
    ("Através do Espelho", 38.00, 3);


/*TABELA VENDA */

CREATE TABLE TBVENDA (
    IDVENDA INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    DATAVENDA DATETIME,
    FORMA VARCHAR(20)
);

/*DADOS DA TABELA VENDA*/
INSERT INTO TBVENDA (DATAVENDA, FORMA) VALUES
    ("2024-07-12", "DINHEIRO"),
    ("2024-07-12", "DÉBITO"),
    ("2024-07-13", "CRÉDITO"),
    ("2024-07-13", "PIX"),
    ("2024-07-13", "DINHEIRO"),
    ("2024-07-15", "CRÉDITO"),
    ("2024-07-15", "DINHEIRO"),
    ("2024-07-15", "PIX"),
    ("2024-07-16", "PIX"),
    ("2024-07-16", "PIX"),
    ("2024-07-18", "DÉBITO"),
    ("2024-07-18", "PIX");

/*TABELA ITENS DA VENDA */

CREATE TABLE TBITENS (
    IDITEM INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    CODVENDA INT NOT NULL,
    CODPROD INT NOT NULL,
    QUANTIDADE INT,
    FOREIGN KEY (CODVENDA) REFERENCES TBVENDA (IDVENDA),
    FOREIGN KEY (CODPROD) REFERENCES TBPRODUTO (IDPROD)
) ENGINE=INNODB;

/*DADOS DA TABELA ITENS DE VENDA */
INSERT INTO TBITENS (CODVENDA, CODPROD, QUANTIDADE) VALUES
    (1, 3, 1),
    (2, 5, 1),
    (3, 1, 5),
    (3, 3, 2),
    (4, 8, 1),
    (5, 7, 1),
    (6, 3, 1),
    (7, 9, 1),
    (8, 5, 3),
    (9, 11, 1),
    (9, 10, 1),
    (9, 9, 1),
    (10, 6, 1),
    (10, 7, 1),
    (11, 7, 2),
    (12, 4, 1);

